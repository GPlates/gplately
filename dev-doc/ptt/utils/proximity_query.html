<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.0">
<title>gplately.ptt.utils.proximity_query API documentation</title>
<meta name="description" content="Copyright (C) 2017 The University of Sydney, Australia â€¦">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [ ['$','$'], ["\\(","\\)"] ], processEscapes: true } });</script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>gplately.ptt.utils.proximity_query</code></h1>
</header>
<section id="section-intro">
<p>Copyright (C) 2017 The University of Sydney, Australia</p>
<p>This program is free software; you can redistribute it and/or modify it under
the terms of the GNU General Public License, version 2, as published by
the Free Software Foundation.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT
ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
FITNESS FOR A PARTICULAR PURPOSE.
See the GNU General Public License
for more details.</p>
<p>You should have received a copy of the GNU General Public License along
with this program; if not, write to Free Software Foundation, Inc.,
51 Franklin Street, Fifth Floor, Boston, MA
02110-1301, USA.</p>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="gplately.ptt.utils.proximity_query.find_closest_geometries_to_points"><code class="name flex">
<span>def <span class="ident">find_closest_geometries_to_points</span></span>(<span>points, geometries, geometry_proxies=None, distance_threshold_radians=None, return_closest_position=False, return_closest_index=False, geometries_are_solid=False, all_geometries=False, subdivision_depth=4)</span>
</code></dt>
<dd>
<div class="desc"><p>Efficient point-to-geometry distance queries when there are many relatively uniformly spaced points to be tested against geometries.</p>
<p>points: a sequence of 'pygplates.PointOnSphere'.</p>
<p>geometries: a sequence of 'pygplates.GeometryOnSphere'.</p>
<p>geometry_proxies: Optional sequence of objects associated with 'geometries'.
If not specified then the proxies default to the geometries themselves.
These can be any object (such as the 'pygplates.Feature' that the geometry came from).</p>
<p>distance_threshold_radians: Optional distance threshold in radians - threshold should be in the range [0,PI] if specified.</p>
<p>return_closest_position: Whether to also return the closest point on each geometry - default is False.</p>
<p>return_closest_index: Whether to also return the index of the closest point (for multi-points) or
the index of the closest segment (for polylines and polygons) - default is False.</p>
<p>geometries_are_solid: Whether the interiors of the geometries are solid or not - only applies to polygon geometries - default is False.</p>
<p>all_geometries: Whether to find all geometries near each point (within threshold distance) or just the closest.
Defaults to False (only returns closest geometry to each point).</p>
<p>subdivision_depth: The depth of the lat/lon quad tree used to speed up point-to-geometry distance queries.
The lat/lon width of a leaf quad tree node is (90 / (2^subdivision_depth)) degrees.
Generally the denser the 'points' the larger the depth should be.
Setting this value too high causes unnecessary time to be spent generating a deep quad tree.
Setting this value too low reduces the culling efficiency of the quad tree.
However a value of 4 seems to work quite well for a uniform lat/lon spacing of 'points' of 1 degree and below
without the cost of generating a deep quad tree.
So most of the time the subdivision depth can be left at its default value.</p>
<p>Returns: A list of geometry proxies associated with 'points'.
The length of the returned list matches the length of 'points'.
For each point in 'points', if the point is close to a geometry then that geometry's proxy (and its distance information)
is stored (otherwise None is stored) at the same index (as the point) in the returned list.
If 'all_geometries' is False then each item in returned list is a single geometry proxy (and its distance information)
representing the closest geometry within threshold distance (or a single None).
If 'all_geometries' is True then each item in returned list is a <em>list</em> of geometry proxies (and their distance informations)
representing all geometries within threshold distance (or a single None).
Above we mentioned "geometry proxy (and its distance information)". This is a tuple whose size depends on
the values of 'return_closest_position' and 'return_closest_index' according to&hellip;</p>
<pre><code>        if return_closest_position and return_closest_index:
            geometry_proxy_to_point = (distance, closest_position, closest_index, geometry_proxy)
        elif return_closest_position:
            geometry_proxy_to_point = (distance, closest_position, geometry_proxy)
        elif return_closest_index:
            geometry_proxy_to_point = (distance, closest_index, geometry_proxy)
        else:
            geometry_proxy_to_point = (distance, geometry_proxy)
</code></pre>
<p>The arguments 'distance_threshold_radians', 'return_closest_position', 'return_closest_index' and 'geometries_are_solid' are
similar to those in pygplates.GeometryOnSphere.distance()&hellip;
See <a href="http://www.gplates.org/docs/pygplates/generated/pygplates.GeometryOnSphere.html#pygplates.GeometryOnSphere.distance">http://www.gplates.org/docs/pygplates/generated/pygplates.GeometryOnSphere.html#pygplates.GeometryOnSphere.distance</a></p>
<p>Raises ValueError if the lengths of 'geometries' and 'geometry_proxies' (if specified) do not match.</p></div>
</dd>
<dt id="gplately.ptt.utils.proximity_query.find_closest_geometries_to_points_using_points_spatial_tree"><code class="name flex">
<span>def <span class="ident">find_closest_geometries_to_points_using_points_spatial_tree</span></span>(<span>points, spatial_tree_of_points, geometries, geometry_proxies=None, distance_threshold_radians=None, return_closest_position=False, return_closest_index=False, geometries_are_solid=False, all_geometries=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Same as 'find_closest_geometries_to_points()' except 'spatial_tree_of_points' is a 'points_spatial_tree.PointsSpatialTree' of 'points'.</p>
<p>This is useful when re-using a single 'points_spatial_tree.PointsSpatialTree'.
For example, when using it both for point-in-polygon queries and minimum distance queries.</p></div>
</dd>
<dt id="gplately.ptt.utils.proximity_query.find_closest_points_to_geometries"><code class="name flex">
<span>def <span class="ident">find_closest_points_to_geometries</span></span>(<span>geometries, points, point_proxies=None, distance_threshold_radians=None, return_closest_position=False, return_closest_index=False, geometries_are_solid=False, all_points=False, subdivision_depth=4)</span>
</code></dt>
<dd>
<div class="desc"><p>Efficient geometry-to-point distance queries when geometries are tested against many relatively uniformly spaced points.</p>
<p>geometries: a sequence of 'pygplates.GeometryOnSphere'.</p>
<p>points: a sequence of 'pygplates.PointOnSphere'.</p>
<p>point_proxies: Optional sequence of objects associated with 'points'.
If not specified then the proxies default to the points themselves.
These can be any object (such as a scalar value associated with the point).</p>
<p>distance_threshold_radians: Optional distance threshold in radians - threshold should be in the range [0,PI] if specified.</p>
<p>return_closest_position: Whether to also return the closest point on each geometry - default is False.</p>
<p>return_closest_index: Whether to also return the index of the closest point (for multi-points) or
the index of the closest segment (for polylines and polygons) - default is False.</p>
<p>geometries_are_solid: Whether the interiors of the geometries are solid or not - only applies to polygon geometries - default is False.</p>
<p>all_points: Whether to find all points near each geometry (within threshold distance) or just the closest.
Defaults to False (only returns closest point to each geometry).</p>
<p>subdivision_depth: The depth of the lat/lon quad tree used to speed up point-to-geometry distance queries.
The lat/lon width of a leaf quad tree node is (90 / (2^subdivision_depth)) degrees.
Generally the denser the 'points' the larger the depth should be.
Setting this value too high causes unnecessary time to be spent generating a deep quad tree.
Setting this value too low reduces the culling efficiency of the quad tree.
However a value of 4 seems to work quite well for a uniform lat/lon spacing of 'points' of 1 degree and below
without the cost of generating a deep quad tree.
So most of the time the subdivision depth can be left at its default value.</p>
<p>Returns: A list of point proxies associated with 'geometries'.
The length of the returned list matches the length of 'geometries'.
For each geometry in 'geometries', if the geometry is close to a point then that point's proxy (and its distance information)
is stored (otherwise None is stored) at the same index (as the geometry) in the returned list.
If 'all_points' is False then each item in returned list is a single point proxy (and its distance information)
representing the closest point within threshold distance (or a single None).
If 'all_points' is True then each item in returned list is a <em>list</em> of point proxies (and their distance informations)
representing all points within threshold distance (or a single None).
Above we mentioned "point proxy (and its distance information)". This is a tuple whose size depends on
the values of 'return_closest_position' and 'return_closest_index' according to&hellip;</p>
<pre><code>        if return_closest_position and return_closest_index:
            point_proxy_to_point = (distance, closest_position, closest_index, point_proxy)
        elif return_closest_position:
            point_proxy_to_point = (distance, closest_position, point_proxy)
        elif return_closest_index:
            point_proxy_to_point = (distance, closest_index, point_proxy)
        else:
            point_proxy_to_point = (distance, point_proxy)
</code></pre>
<p>The arguments 'distance_threshold_radians', 'return_closest_position', 'return_closest_index' and 'geometries_are_solid' are
similar to those in pygplates.GeometryOnSphere.distance()&hellip;
See <a href="http://www.gplates.org/docs/pygplates/generated/pygplates.GeometryOnSphere.html#pygplates.GeometryOnSphere.distance">http://www.gplates.org/docs/pygplates/generated/pygplates.GeometryOnSphere.html#pygplates.GeometryOnSphere.distance</a></p>
<p>Raises ValueError if the lengths of 'points' and 'point_proxies' (if specified) do not match.</p></div>
</dd>
<dt id="gplately.ptt.utils.proximity_query.find_closest_points_to_geometries_using_points_spatial_tree"><code class="name flex">
<span>def <span class="ident">find_closest_points_to_geometries_using_points_spatial_tree</span></span>(<span>geometries, points, spatial_tree_of_points, point_proxies=None, distance_threshold_radians=None, return_closest_position=False, return_closest_index=False, geometries_are_solid=False, all_points=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Same as 'find_closest_points_to_geometries()' except 'spatial_tree_of_points' is a 'points_spatial_tree.PointsSpatialTree' of 'points'.</p>
<p>This is useful when re-using a single 'points_spatial_tree.PointsSpatialTree'.
For example, when using it both for point-in-polygon queries and minimum distance queries.</p></div>
</dd>
<dt id="gplately.ptt.utils.proximity_query.find_closest_points_to_geometry"><code class="name flex">
<span>def <span class="ident">find_closest_points_to_geometry</span></span>(<span>geometry, points, point_proxies=None, distance_threshold_radians=None, return_closest_position=False, return_closest_index=False, geometry_is_solid=False, all_points=False, subdivision_depth=4)</span>
</code></dt>
<dd>
<div class="desc"><p>Same as 'find_closest_points_to_geometries()' except with a single geometry instead of a list of geometries.</p>
<p>Returns a single "point proxy (and its distance information)" instead of a list
(see 'find_closest_points_to_geometries()' for more information).</p></div>
</dd>
<dt id="gplately.ptt.utils.proximity_query.find_closest_points_to_geometry_using_points_spatial_tree"><code class="name flex">
<span>def <span class="ident">find_closest_points_to_geometry_using_points_spatial_tree</span></span>(<span>geometry, points, spatial_tree_of_points, point_proxies=None, distance_threshold_radians=None, return_closest_position=False, return_closest_index=False, geometry_is_solid=False, all_points=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Same as 'find_closest_points_to_geometries_using_points_spatial_tree()' except with a single geometry instead of a list of geometries.</p>
<p>Returns a single "point proxy (and its distance information)" instead of a list.</p></div>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<header>
<a class="homelink" rel="home" title="GPlately Home" href="https://gplates.github.io/gplately/">
<img src="https://raw.githubusercontent.com/GPlates/gplately/master/Notebooks/NotebookFiles/ReadMe_Files/GPlately_Main_logo.png" alt="GPlately logo" height="172" width="205">
</a>
</header>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="gplately.ptt.utils" href="index.html">gplately.ptt.utils</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="gplately.ptt.utils.proximity_query.find_closest_geometries_to_points" href="#gplately.ptt.utils.proximity_query.find_closest_geometries_to_points">find_closest_geometries_to_points</a></code></li>
<li><code><a title="gplately.ptt.utils.proximity_query.find_closest_geometries_to_points_using_points_spatial_tree" href="#gplately.ptt.utils.proximity_query.find_closest_geometries_to_points_using_points_spatial_tree">find_closest_geometries_to_points_using_points_spatial_tree</a></code></li>
<li><code><a title="gplately.ptt.utils.proximity_query.find_closest_points_to_geometries" href="#gplately.ptt.utils.proximity_query.find_closest_points_to_geometries">find_closest_points_to_geometries</a></code></li>
<li><code><a title="gplately.ptt.utils.proximity_query.find_closest_points_to_geometries_using_points_spatial_tree" href="#gplately.ptt.utils.proximity_query.find_closest_points_to_geometries_using_points_spatial_tree">find_closest_points_to_geometries_using_points_spatial_tree</a></code></li>
<li><code><a title="gplately.ptt.utils.proximity_query.find_closest_points_to_geometry" href="#gplately.ptt.utils.proximity_query.find_closest_points_to_geometry">find_closest_points_to_geometry</a></code></li>
<li><code><a title="gplately.ptt.utils.proximity_query.find_closest_points_to_geometry_using_points_spatial_tree" href="#gplately.ptt.utils.proximity_query.find_closest_points_to_geometry_using_points_spatial_tree">find_closest_points_to_geometry_using_points_spatial_tree</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.0</a>.</p>
</footer>
</body>
</html>
