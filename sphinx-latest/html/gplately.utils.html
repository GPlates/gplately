

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>gplately.utils package &mdash; gplately 2.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=51b770b3"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            gplately
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_usages.html">Minimal working example</a></li>
<li class="toctree-l1"><a class="reference internal" href="use_cases.html">Common Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Trouble-shooting and FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_line_interface.html">Command Line Interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="primer.html">Primer</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">GPlately API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">gplately</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">gplately.utils package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/gplately.utils.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="gplately-utils-package">
<h1>gplately.utils package<a class="headerlink" href="#gplately-utils-package" title="Link to this heading"></a></h1>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Link to this heading"></a></h2>
</section>
<section id="module-gplately.utils.check_pmm">
<span id="gplately-utils-check-pmm-module"></span><h2>gplately.utils.check_pmm module<a class="headerlink" href="#module-gplately.utils.check_pmm" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.check_pmm.ensure_plate_model_manager_compatible">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.check_pmm.</span></span><span class="sig-name descname"><span class="pre">ensure_plate_model_manager_compatible</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">REQUIRED_PMM_VERSION</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/check_pmm.html#ensure_plate_model_manager_compatible"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.check_pmm.ensure_plate_model_manager_compatible" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.check_pmm.install_and_update_pmm">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.check_pmm.</span></span><span class="sig-name descname"><span class="pre">install_and_update_pmm</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/check_pmm.html#install_and_update_pmm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.check_pmm.install_and_update_pmm" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.check_pmm.is_pmm_version_good_enough">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.check_pmm.</span></span><span class="sig-name descname"><span class="pre">is_pmm_version_good_enough</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">installed_version</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">required_version</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/check_pmm.html#is_pmm_version_good_enough"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.check_pmm.is_pmm_version_good_enough" title="Link to this definition"></a></dt>
<dd><p>return True if the version of installed pmm is good enough, otherwise False.
assume the version string something like 1.2.0</p>
</dd></dl>

</section>
<section id="module-gplately.utils.crustal_production">
<span id="gplately-utils-crustal-production-module"></span><h2>gplately.utils.crustal_production module<a class="headerlink" href="#module-gplately.utils.crustal_production" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.crustal_production.compute_crustal_production_rate">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.crustal_production.</span></span><span class="sig-name descname"><span class="pre">compute_crustal_production_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">agegrid_fn</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">age_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">3</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/crustal_production.html#compute_crustal_production_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.crustal_production.compute_crustal_production_rate" title="Link to this definition"></a></dt>
<dd><p>mask out all values greater than the age threshold in the age grid;
find the total area which is covered by the remaining age values;
divide the area by the age threshold to obtain crustal production rate in km2/year</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agegrid_fn</strong> (<em>str</em>) – the file path to the age grid file(NetCDF)</p></li>
<li><p><strong>age_threshold</strong> (<em>int</em>) – use the age threshold to mask age grid and calculate the crustal production rate</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>a floating point number(crustal production rate in km2/year)</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-gplately.utils.dev_warning">
<span id="gplately-utils-dev-warning-module"></span><h2>gplately.utils.dev_warning module<a class="headerlink" href="#module-gplately.utils.dev_warning" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.dev_warning.print_dev_warning">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.dev_warning.</span></span><span class="sig-name descname"><span class="pre">print_dev_warning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/dev_warning.html#print_dev_warning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.dev_warning.print_dev_warning" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.dev_warning.print_using_source_code_warning">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.dev_warning.</span></span><span class="sig-name descname"><span class="pre">print_using_source_code_warning</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">version</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/dev_warning.html#print_using_source_code_warning"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.dev_warning.print_using_source_code_warning" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-gplately.utils.feature_utils">
<span id="gplately-utils-feature-utils-module"></span><h2>gplately.utils.feature_utils module<a class="headerlink" href="#module-gplately.utils.feature_utils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.feature_utils.shapelify_features">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.feature_utils.</span></span><span class="sig-name descname"><span class="pre">shapelify_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">features</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">central_meridian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tessellate_degrees</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/feature_utils.html#shapelify_features"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.feature_utils.shapelify_features" title="Link to this definition"></a></dt>
<dd><p>Generate Shapely <cite>MultiPolygon</cite> or <cite>MultiLineString</cite> geometries from reconstructed feature polygons.</p>
<p class="rubric">Notes</p>
<p>Some Shapely polygons generated by <cite>shapelify_features</cite> cut longitudes of 180
or -180 degrees. These features may appear unclosed at the dateline, so Shapely
“closes” these polygons by connecting any of their open ends with lines. These
lines may manifest on GeoAxes plots as horizontal lines that span the entire
global extent. To prevent this, <cite>shapelify_features</cite> uses pyGPlates’
[DateLineWrapper](<a class="reference external" href="https://www.gplates.org/docs/pygplates/generated/pygplates.datelinewrapper">https://www.gplates.org/docs/pygplates/generated/pygplates.datelinewrapper</a>)
to split a feature polygon into multiple closed polygons if it happens to cut the antimeridian.
Another measure taken to ensure features are valid is to order exterior coordinates
of Shapely polygons anti-clockwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>features</strong> (<em>iterable</em><em> of </em><em>&lt;pygplates.Feature&gt;</em><em>, </em><em>&lt;ReconstructedFeatureGeometry&gt;</em><em> or </em><em>&lt;GeometryOnSphere&gt;</em>) – Iterable containing reconstructed polygon features.</p></li>
<li><p><strong>central_meridian</strong> (<em>float</em>) – Central meridian around which to perform wrapping; default: 0.0.</p></li>
<li><p><strong>tessellate_degrees</strong> (<em>float</em><em> or </em><em>None</em>) – If provided, geometries will be tessellated to this resolution prior to wrapping.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>all_geometries</strong> – Shapely geometries converted from the given reconstructed features. Any
geometries at the dateline are split.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of <cite>shapely.geometry.BaseGeometry</cite></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">geometry.pygplates_to_shapely</span></code></dt><dd><p>convert PyGPlates geometry objects to</p>
</dd>
</dl>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Shapely</span></code></p>
</div>
</dd></dl>

</section>
<section id="module-gplately.utils.io_utils">
<span id="gplately-utils-io-utils-module"></span><h2>gplately.utils.io_utils module<a class="headerlink" href="#module-gplately.utils.io_utils" title="Link to this heading"></a></h2>
<p>Tools to read geometry data from input files and output them as <cite>Shapely</cite>
geometries. These geometries can be plotted directly with GPlately’s
<cite>PlotTopologies</cite> object.</p>
<p>By default, input files are read with <cite>GeoPandas</cite> and output as a
<cite>geopandas.GeoSeries</cite> object that contains <cite>Shapely</cite> geometries.
If <cite>GeoPandas</cite> is not found on the system, input files are read with
<cite>Shapely</cite> instead and are still returned as <cite>Shapely</cite> geometries.</p>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.io_utils.get_geometries">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">get_geometries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/io_utils.html#get_geometries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.io_utils.get_geometries" title="Link to this definition"></a></dt>
<dd><p>Read a file and return feature geometries.</p>
<p>If <cite>geopandas</cite> is available, it will be used to read the file,
returning a <cite>geopandas.GeoSeries</cite>. If <cite>geopandas</cite> is not found,
only shapefiles can be read, and a list of <cite>shapely</cite> geometries
will be returned instead of a <cite>geopandas.GeoSeries</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to the file to be read.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>geometries</strong> – <cite>shapely</cite> geometries that define the feature geometry held in the
shapefile.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list or geopandas.GeoSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.io_utils.get_valid_geometries">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.io_utils.</span></span><span class="sig-name descname"><span class="pre">get_valid_geometries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/io_utils.html#get_valid_geometries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.io_utils.get_valid_geometries" title="Link to this definition"></a></dt>
<dd><p>Read a file and return valid feature geometries.</p>
<p>If <cite>geopandas</cite> is available, it will be used to read the file,
returning a <cite>geopandas.GeoSeries</cite>. If <cite>geopandas</cite> is not found,
only shapefiles can be read, and a list of <cite>shapely</cite> geometries
will be returned instead of a <cite>geopandas.GeoSeries</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to the file to be read.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>geometries</strong> – Valid <cite>shapely</cite> geometries that define the feature geometry held in the
shapefile.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list or geopandas.GeoSeries</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-gplately.utils.log_utils">
<span id="gplately-utils-log-utils-module"></span><h2>gplately.utils.log_utils module<a class="headerlink" href="#module-gplately.utils.log_utils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.log_utils.get_debug_level">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">get_debug_level</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/log_utils.html#get_debug_level"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.log_utils.get_debug_level" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.log_utils.setup_logging">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">setup_logging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/log_utils.html#setup_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.log_utils.setup_logging" title="Link to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.log_utils.turn_on_debug_logging">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.log_utils.</span></span><span class="sig-name descname"><span class="pre">turn_on_debug_logging</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/log_utils.html#turn_on_debug_logging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.log_utils.turn_on_debug_logging" title="Link to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-gplately.utils.plot_utils">
<span id="gplately-utils-plot-utils-module"></span><h2>gplately.utils.plot_utils module<a class="headerlink" href="#module-gplately.utils.plot_utils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.plot_utils.plot_subduction_teeth">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.plot_utils.</span></span><span class="sig-name descname"><span class="pre">plot_subduction_teeth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polarity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/plot_utils.html#plot_subduction_teeth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.plot_utils.plot_subduction_teeth" title="Link to this definition"></a></dt>
<dd><p>Add subduction teeth to a plot.</p>
<p>The subduction polarity used for subduction teeth can be specified
manually or detected automatically if <cite>geometries</cite> is a
<cite>geopandas.GeoDataFrame</cite> object with a <cite>polarity</cite> column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometries</strong> (<em>geopandas.GeoDataFrame</em><em>, </em><em>sequence</em><em> of </em><em>shapely geometries</em><em>, or </em><em>str</em>) – If a <cite>geopandas.GeoDataFrame</cite> is given, its geometry attribute
will be used. If <cite>geometries</cite> is a string, it must be the path to
a file, which will be loaded with <cite>geopandas.read_file</cite>. Otherwise,
<cite>geometries</cite> must be a sequence of shapely geometry objects (instances
of the <cite>shapely.geometry.base.BaseGeometry</cite> class).</p></li>
<li><p><strong>width</strong> (<em>float</em>) – The (approximate) width of the subduction teeth. If a projection is
used, this value will be in projected units.</p></li>
<li><p><strong>polarity</strong> (<em>{&quot;left&quot;</em><em>, </em><em>&quot;l&quot;</em><em>, </em><em>&quot;right&quot;</em><em>, </em><em>&quot;r&quot;</em><em>, </em><em>None}</em><em>, </em><em>default None</em>) – The subduction polarity of the geometries. If no polarity is provided,
and <cite>geometries</cite> is a <cite>geopandas.GeoDataFrame</cite>, this function will
attempt to find a <cite>polarity</cite> column in the data frame and use the
values given there. If <cite>polarity</cite> is not manually specified and no
appropriate column can be found, an error will be raised.</p></li>
<li><p><strong>height</strong> (<em>float</em><em>, </em><em>default None</em>) – If provided, the height of the subduction teeth. As with <cite>width</cite>,
this value should be given in projected units. If no value is given,
the height of the teeth will be equal to 0.6 * <cite>width</cite>.</p></li>
<li><p><strong>spacing</strong> (<em>float</em><em>, </em><em>default None</em>) – If provided, the spacing between the subduction teeth. As with
<cite>width</cite> and <cite>height</cite>, this value should be given in projected units.
If no value is given, <cite>spacing</cite> will default to <cite>width</cite>, producing
tightly packed subduction teeth.</p></li>
<li><p><strong>projection</strong> (<em>cartopy.crs.Transform</em><em>, </em><em>&quot;auto&quot;</em><em>, or </em><em>None</em><em>, </em><em>default &quot;auto&quot;</em>) – The projection of the plot. If the plot has no projection, this value
can be explicitly given as <cite>None</cite>. The default value is “auto”, which
will acquire the projection automatically from the plot axes.</p></li>
<li><p><strong>transform</strong> (<em>cartopy.crs.Transform</em><em>, or </em><em>None</em><em>, </em><em>default None</em>) – If the plot is projected, a <cite>transform</cite> value is usually needed.
Frequently, the appropriate value is an instance of
<cite>cartopy.crs.PlateCarree</cite>.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, or </em><em>None</em><em>, </em><em>default None</em>) – The axes on which the subduction teeth will be drawn. By default,
the current axes will be acquired using <cite>matplotlib.pyplot.gca</cite>.</p></li>
<li><p><strong>**kwargs</strong> – Any further keyword arguments will be passed to
<cite>matplotlib.patches.Polygon</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>width</cite> &lt;= 0, or if <cite>polarity</cite> is an invalid value or could not
    be determined.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-gplately.utils.seafloor_grid_utils">
<span id="gplately-utils-seafloor-grid-utils-module"></span><h2>gplately.utils.seafloor_grid_utils module<a class="headerlink" href="#module-gplately.utils.seafloor_grid_utils" title="Link to this heading"></a></h2>
<p>Auxiliary functions for SeafloorGrid</p>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.seafloor_grid_utils.create_icosahedral_mesh">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.seafloor_grid_utils.</span></span><span class="sig-name descname"><span class="pre">create_icosahedral_mesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refinement_levels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/seafloor_grid_utils.html#create_icosahedral_mesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.seafloor_grid_utils.create_icosahedral_mesh" title="Link to this definition"></a></dt>
<dd><p>Define a global point mesh with Stripy’s
[icosahedral triangulated mesh](<a class="reference external" href="https://github.com/underworldcode/stripy/blob/294354c00dd72e085a018e69c345d9353c6fafef/stripy/spherical_meshes.py#L27">https://github.com/underworldcode/stripy/blob/294354c00dd72e085a018e69c345d9353c6fafef/stripy/spherical_meshes.py#L27</a>)
and turn all mesh domains into pyGPlates MultiPointOnSphere types.</p>
<p>This global mesh will be masked with a set of continental or COB terrane
polygons to define the ocean basin at a given reconstruction time.
The <cite>refinement_levels</cite> integer is proportional to the resolution of the
mesh and the ocean/continent boundary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>refinement_levels</strong> (<em>int</em>) – Refine the number of points in the triangulation. The larger the
refinement level, the sharper the ocean basin resolution.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>multi_point</strong> (<em>instance of &lt;pygplates.MultiPointOnSphere&gt;</em>) – The longitues and latitudes that make up the icosahedral ocean mesh
collated into a MultiPointOnSphere object.</p></li>
<li><p><strong>icosahedral_global_mesh</strong> (<em>instance of &lt;stripy.spherical_meshes.icosahedral_mesh&gt;</em>) – The original global icosahedral triangulated mesh.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.seafloor_grid_utils.ensure_polygon_geometry">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.seafloor_grid_utils.</span></span><span class="sig-name descname"><span class="pre">ensure_polygon_geometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reconstructed_polygons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/seafloor_grid_utils.html#ensure_polygon_geometry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.seafloor_grid_utils.ensure_polygon_geometry" title="Link to this definition"></a></dt>
<dd><p>Ensure COB terrane/continental polygon geometries are polygons
with reconstruction plate IDs and valid times.</p>
<p class="rubric">Notes</p>
<p>This step must be done so that the initial set of ocean basin points
(the Stripy icosahedral mesh) can be partitioned into plates using
each reconstruction plate ID for the given plate <cite>model</cite>.</p>
<p>This allows for an oceanic point-in-continental
polygon query for every identified plate ID. See documentation for
<cite>point_in_polygon_routine</cite> for more details.</p>
<p><cite>ensure_polygon_geometry</cite> works as follows:
COB terrane/continental polygons are assumed to have been reconstructed
already in <cite>reconstructed_polygons</cite> (a list of
type &lt;pygplates.ReconstructedFeatureGeometry&gt;). The list contents are
turned into a &lt;pygplates.FeatureCollection&gt; to be ascribed a
<cite>PolygonOnSphere</cite> geometry, a reconstruction plate ID, and a valid time.
Once finished, this feature collection is turned back into a list of
instance &lt;pygplates.ReconstructedFeatureGeometry&gt; and returned.</p>
<p>This revert must be completed for compatibility with the subsequent
point-in-polygon routine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reconstructed_polygons</strong> (<em>list</em><em> of </em><em>instance &lt;pygplates.ReconstructedFeatureGeometry&gt;</em>) – If used in <cite>SeafloorGrid</cite>, these are automatically obtained from the
<cite>PlotTopologies.continents</cite> attribute (the reconstructed continental
polygons at the current reconstruction time).</p></li>
<li><p><strong>rotation_model</strong> (<em>instance</em><em> of </em><em>&lt;pygplates.RotationModel&gt;</em>) – A parameter for turning the &lt;pygplates.FeatureCollection&gt; back into a
list of instance &lt;pygplates.ReconstructedFeatureGeometry&gt; for
compatibility with the point-in-polygon routine.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.seafloor_grid_utils.point_in_polygon_routine">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.seafloor_grid_utils.</span></span><span class="sig-name descname"><span class="pre">point_in_polygon_routine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multi_point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">COB_polygons</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/seafloor_grid_utils.html#point_in_polygon_routine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.seafloor_grid_utils.point_in_polygon_routine" title="Link to this definition"></a></dt>
<dd><p>Perform Plate Tectonic Tools’ point in polygon routine to partition
points in a <cite>multi_point</cite> MultiPointOnSphere feature based on whether
they are inside or outside the polygons in <cite>COB_polygons</cite>.</p>
<p class="rubric">Notes</p>
<p>Assuming the <cite>COB_polygons</cite> have passed through <cite>ensure_polygon_geometry</cite>,
each polygon should have a plate ID assigned to it.</p>
<p>This PIP routine serves two purposes for <cite>SeafloorGrid</cite>:</p>
<p>1) It identifies continental regions in the icosahedral global mesh
MultiPointOnSphere feature and ‘erases’ in-continent oceanic points
for the construction of a continental mask at each timestep;</p>
<p>2) It identifies oceanic points in the icosahedral global mesh.
These points will be passed to a function that calculates each point’s
proximity to its nearest MOR segment (if any) within the polygonal domain
of its allocated plate ID. Each distance is divided by half the
<cite>initial_ocean_mean_spreading_rate</cite> (an attribute of <cite>SeafloorGrids</cite>) to
determine a simplified seafloor age for each point.</p>
<p>Number 2) only happens once at the start of the gridding process to
momentarily fill the gridding region with initial ocean points that have
set ages (albeit not from a plate model file). After multiple time steps
of reconstruction, the ocean basin will be filled with new points (with
plate-model prescribed ages) that emerge from ridge topologies.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>pygplates.MultiPointOnSphere(points_in_arr)</strong> (<em>instance &lt;pygplates.MultiPointOnSphere&gt;</em>) – Point features that are within COB terrane polygons.</p></li>
<li><p><strong>pygplates.MultiPointOnSphere(points_out_arr)</strong> (<em>instance &lt;pygplates.MultiPointOnSphere&gt;</em>) – Point features that are outside COB terrane polygons.</p></li>
<li><p><strong>zvals</strong> (<em>list</em>) – A binary list. If an entry is == 0, its corresponing point in the
MultiPointOnSphere object is on the ocean. If == 1, the point is
in the COB terrane polygon.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-gplately.utils.version">
<span id="gplately-utils-version-module"></span><h2>gplately.utils.version module<a class="headerlink" href="#module-gplately.utils.version" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.version.get_distribution_version">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.version.</span></span><span class="sig-name descname"><span class="pre">get_distribution_version</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/version.html#get_distribution_version"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.version.get_distribution_version" title="Link to this definition"></a></dt>
<dd><p>get the version string from GPlately package metadata</p>
</dd></dl>

</section>
<section id="module-gplately.utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-gplately.utils" title="Link to this heading"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.create_icosahedral_mesh">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.</span></span><span class="sig-name descname"><span class="pre">create_icosahedral_mesh</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">refinement_levels</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/seafloor_grid_utils.html#create_icosahedral_mesh"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.create_icosahedral_mesh" title="Link to this definition"></a></dt>
<dd><p>Define a global point mesh with Stripy’s
[icosahedral triangulated mesh](<a class="reference external" href="https://github.com/underworldcode/stripy/blob/294354c00dd72e085a018e69c345d9353c6fafef/stripy/spherical_meshes.py#L27">https://github.com/underworldcode/stripy/blob/294354c00dd72e085a018e69c345d9353c6fafef/stripy/spherical_meshes.py#L27</a>)
and turn all mesh domains into pyGPlates MultiPointOnSphere types.</p>
<p>This global mesh will be masked with a set of continental or COB terrane
polygons to define the ocean basin at a given reconstruction time.
The <cite>refinement_levels</cite> integer is proportional to the resolution of the
mesh and the ocean/continent boundary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>refinement_levels</strong> (<em>int</em>) – Refine the number of points in the triangulation. The larger the
refinement level, the sharper the ocean basin resolution.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>multi_point</strong> (<em>instance of &lt;pygplates.MultiPointOnSphere&gt;</em>) – The longitues and latitudes that make up the icosahedral ocean mesh
collated into a MultiPointOnSphere object.</p></li>
<li><p><strong>icosahedral_global_mesh</strong> (<em>instance of &lt;stripy.spherical_meshes.icosahedral_mesh&gt;</em>) – The original global icosahedral triangulated mesh.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.ensure_polygon_geometry">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.</span></span><span class="sig-name descname"><span class="pre">ensure_polygon_geometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reconstructed_polygons</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation_model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/seafloor_grid_utils.html#ensure_polygon_geometry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.ensure_polygon_geometry" title="Link to this definition"></a></dt>
<dd><p>Ensure COB terrane/continental polygon geometries are polygons
with reconstruction plate IDs and valid times.</p>
<p class="rubric">Notes</p>
<p>This step must be done so that the initial set of ocean basin points
(the Stripy icosahedral mesh) can be partitioned into plates using
each reconstruction plate ID for the given plate <cite>model</cite>.</p>
<p>This allows for an oceanic point-in-continental
polygon query for every identified plate ID. See documentation for
<cite>point_in_polygon_routine</cite> for more details.</p>
<p><cite>ensure_polygon_geometry</cite> works as follows:
COB terrane/continental polygons are assumed to have been reconstructed
already in <cite>reconstructed_polygons</cite> (a list of
type &lt;pygplates.ReconstructedFeatureGeometry&gt;). The list contents are
turned into a &lt;pygplates.FeatureCollection&gt; to be ascribed a
<cite>PolygonOnSphere</cite> geometry, a reconstruction plate ID, and a valid time.
Once finished, this feature collection is turned back into a list of
instance &lt;pygplates.ReconstructedFeatureGeometry&gt; and returned.</p>
<p>This revert must be completed for compatibility with the subsequent
point-in-polygon routine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reconstructed_polygons</strong> (<em>list</em><em> of </em><em>instance &lt;pygplates.ReconstructedFeatureGeometry&gt;</em>) – If used in <cite>SeafloorGrid</cite>, these are automatically obtained from the
<cite>PlotTopologies.continents</cite> attribute (the reconstructed continental
polygons at the current reconstruction time).</p></li>
<li><p><strong>rotation_model</strong> (<em>instance</em><em> of </em><em>&lt;pygplates.RotationModel&gt;</em>) – A parameter for turning the &lt;pygplates.FeatureCollection&gt; back into a
list of instance &lt;pygplates.ReconstructedFeatureGeometry&gt; for
compatibility with the point-in-polygon routine.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.get_geometries">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.</span></span><span class="sig-name descname"><span class="pre">get_geometries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">buffer</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/io_utils.html#get_geometries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.get_geometries" title="Link to this definition"></a></dt>
<dd><p>Read a file and return feature geometries.</p>
<p>If <cite>geopandas</cite> is available, it will be used to read the file,
returning a <cite>geopandas.GeoSeries</cite>. If <cite>geopandas</cite> is not found,
only shapefiles can be read, and a list of <cite>shapely</cite> geometries
will be returned instead of a <cite>geopandas.GeoSeries</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to the file to be read.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>geometries</strong> – <cite>shapely</cite> geometries that define the feature geometry held in the
shapefile.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list or geopandas.GeoSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.get_valid_geometries">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.</span></span><span class="sig-name descname"><span class="pre">get_valid_geometries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/io_utils.html#get_valid_geometries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.get_valid_geometries" title="Link to this definition"></a></dt>
<dd><p>Read a file and return valid feature geometries.</p>
<p>If <cite>geopandas</cite> is available, it will be used to read the file,
returning a <cite>geopandas.GeoSeries</cite>. If <cite>geopandas</cite> is not found,
only shapefiles can be read, and a list of <cite>shapely</cite> geometries
will be returned instead of a <cite>geopandas.GeoSeries</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>filename</strong> (<em>str</em>) – Path to the file to be read.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>geometries</strong> – Valid <cite>shapely</cite> geometries that define the feature geometry held in the
shapefile.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list or geopandas.GeoSeries</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.plot_subduction_teeth">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.</span></span><span class="sig-name descname"><span class="pre">plot_subduction_teeth</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">geometries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">width</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">polarity</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">height</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spacing</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">projection</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'auto'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transform</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/plot_utils.html#plot_subduction_teeth"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.plot_subduction_teeth" title="Link to this definition"></a></dt>
<dd><p>Add subduction teeth to a plot.</p>
<p>The subduction polarity used for subduction teeth can be specified
manually or detected automatically if <cite>geometries</cite> is a
<cite>geopandas.GeoDataFrame</cite> object with a <cite>polarity</cite> column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>geometries</strong> (<em>geopandas.GeoDataFrame</em><em>, </em><em>sequence</em><em> of </em><em>shapely geometries</em><em>, or </em><em>str</em>) – If a <cite>geopandas.GeoDataFrame</cite> is given, its geometry attribute
will be used. If <cite>geometries</cite> is a string, it must be the path to
a file, which will be loaded with <cite>geopandas.read_file</cite>. Otherwise,
<cite>geometries</cite> must be a sequence of shapely geometry objects (instances
of the <cite>shapely.geometry.base.BaseGeometry</cite> class).</p></li>
<li><p><strong>width</strong> (<em>float</em>) – The (approximate) width of the subduction teeth. If a projection is
used, this value will be in projected units.</p></li>
<li><p><strong>polarity</strong> (<em>{&quot;left&quot;</em><em>, </em><em>&quot;l&quot;</em><em>, </em><em>&quot;right&quot;</em><em>, </em><em>&quot;r&quot;</em><em>, </em><em>None}</em><em>, </em><em>default None</em>) – The subduction polarity of the geometries. If no polarity is provided,
and <cite>geometries</cite> is a <cite>geopandas.GeoDataFrame</cite>, this function will
attempt to find a <cite>polarity</cite> column in the data frame and use the
values given there. If <cite>polarity</cite> is not manually specified and no
appropriate column can be found, an error will be raised.</p></li>
<li><p><strong>height</strong> (<em>float</em><em>, </em><em>default None</em>) – If provided, the height of the subduction teeth. As with <cite>width</cite>,
this value should be given in projected units. If no value is given,
the height of the teeth will be equal to 0.6 * <cite>width</cite>.</p></li>
<li><p><strong>spacing</strong> (<em>float</em><em>, </em><em>default None</em>) – If provided, the spacing between the subduction teeth. As with
<cite>width</cite> and <cite>height</cite>, this value should be given in projected units.
If no value is given, <cite>spacing</cite> will default to <cite>width</cite>, producing
tightly packed subduction teeth.</p></li>
<li><p><strong>projection</strong> (<em>cartopy.crs.Transform</em><em>, </em><em>&quot;auto&quot;</em><em>, or </em><em>None</em><em>, </em><em>default &quot;auto&quot;</em>) – The projection of the plot. If the plot has no projection, this value
can be explicitly given as <cite>None</cite>. The default value is “auto”, which
will acquire the projection automatically from the plot axes.</p></li>
<li><p><strong>transform</strong> (<em>cartopy.crs.Transform</em><em>, or </em><em>None</em><em>, </em><em>default None</em>) – If the plot is projected, a <cite>transform</cite> value is usually needed.
Frequently, the appropriate value is an instance of
<cite>cartopy.crs.PlateCarree</cite>.</p></li>
<li><p><strong>ax</strong> (<em>matplotlib.axes.Axes</em><em>, or </em><em>None</em><em>, </em><em>default None</em>) – The axes on which the subduction teeth will be drawn. By default,
the current axes will be acquired using <cite>matplotlib.pyplot.gca</cite>.</p></li>
<li><p><strong>**kwargs</strong> – Any further keyword arguments will be passed to
<cite>matplotlib.patches.Polygon</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If <cite>width</cite> &lt;= 0, or if <cite>polarity</cite> is an invalid value or could not
    be determined.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.point_in_polygon_routine">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.</span></span><span class="sig-name descname"><span class="pre">point_in_polygon_routine</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">multi_point</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">COB_polygons</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/seafloor_grid_utils.html#point_in_polygon_routine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.point_in_polygon_routine" title="Link to this definition"></a></dt>
<dd><p>Perform Plate Tectonic Tools’ point in polygon routine to partition
points in a <cite>multi_point</cite> MultiPointOnSphere feature based on whether
they are inside or outside the polygons in <cite>COB_polygons</cite>.</p>
<p class="rubric">Notes</p>
<p>Assuming the <cite>COB_polygons</cite> have passed through <cite>ensure_polygon_geometry</cite>,
each polygon should have a plate ID assigned to it.</p>
<p>This PIP routine serves two purposes for <cite>SeafloorGrid</cite>:</p>
<p>1) It identifies continental regions in the icosahedral global mesh
MultiPointOnSphere feature and ‘erases’ in-continent oceanic points
for the construction of a continental mask at each timestep;</p>
<p>2) It identifies oceanic points in the icosahedral global mesh.
These points will be passed to a function that calculates each point’s
proximity to its nearest MOR segment (if any) within the polygonal domain
of its allocated plate ID. Each distance is divided by half the
<cite>initial_ocean_mean_spreading_rate</cite> (an attribute of <cite>SeafloorGrids</cite>) to
determine a simplified seafloor age for each point.</p>
<p>Number 2) only happens once at the start of the gridding process to
momentarily fill the gridding region with initial ocean points that have
set ages (albeit not from a plate model file). After multiple time steps
of reconstruction, the ocean basin will be filled with new points (with
plate-model prescribed ages) that emerge from ridge topologies.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p><ul class="simple">
<li><p><strong>pygplates.MultiPointOnSphere(points_in_arr)</strong> (<em>instance &lt;pygplates.MultiPointOnSphere&gt;</em>) – Point features that are within COB terrane polygons.</p></li>
<li><p><strong>pygplates.MultiPointOnSphere(points_out_arr)</strong> (<em>instance &lt;pygplates.MultiPointOnSphere&gt;</em>) – Point features that are outside COB terrane polygons.</p></li>
<li><p><strong>zvals</strong> (<em>list</em>) – A binary list. If an entry is == 0, its corresponing point in the
MultiPointOnSphere object is on the ocean. If == 1, the point is
in the COB terrane polygon.</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="gplately.utils.shapelify_features">
<span class="sig-prename descclassname"><span class="pre">gplately.utils.</span></span><span class="sig-name descname"><span class="pre">shapelify_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">features</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">central_meridian</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tessellate_degrees</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/gplately/utils/feature_utils.html#shapelify_features"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gplately.utils.shapelify_features" title="Link to this definition"></a></dt>
<dd><p>Generate Shapely <cite>MultiPolygon</cite> or <cite>MultiLineString</cite> geometries from reconstructed feature polygons.</p>
<p class="rubric">Notes</p>
<p>Some Shapely polygons generated by <cite>shapelify_features</cite> cut longitudes of 180
or -180 degrees. These features may appear unclosed at the dateline, so Shapely
“closes” these polygons by connecting any of their open ends with lines. These
lines may manifest on GeoAxes plots as horizontal lines that span the entire
global extent. To prevent this, <cite>shapelify_features</cite> uses pyGPlates’
[DateLineWrapper](<a class="reference external" href="https://www.gplates.org/docs/pygplates/generated/pygplates.datelinewrapper">https://www.gplates.org/docs/pygplates/generated/pygplates.datelinewrapper</a>)
to split a feature polygon into multiple closed polygons if it happens to cut the antimeridian.
Another measure taken to ensure features are valid is to order exterior coordinates
of Shapely polygons anti-clockwise.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>features</strong> (<em>iterable</em><em> of </em><em>&lt;pygplates.Feature&gt;</em><em>, </em><em>&lt;ReconstructedFeatureGeometry&gt;</em><em> or </em><em>&lt;GeometryOnSphere&gt;</em>) – Iterable containing reconstructed polygon features.</p></li>
<li><p><strong>central_meridian</strong> (<em>float</em>) – Central meridian around which to perform wrapping; default: 0.0.</p></li>
<li><p><strong>tessellate_degrees</strong> (<em>float</em><em> or </em><em>None</em>) – If provided, geometries will be tessellated to this resolution prior to wrapping.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>all_geometries</strong> – Shapely geometries converted from the given reconstructed features. Any
geometries at the dateline are split.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>list of <cite>shapely.geometry.BaseGeometry</cite></p>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">geometry.pygplates_to_shapely</span></code></dt><dd><p>convert PyGPlates geometry objects to</p>
</dd>
</dl>
<p><code class="xref py py-obj docutils literal notranslate"><span class="pre">Shapely</span></code></p>
</div>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023-2025, The University of Sydney.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>